(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t(16),a=t.n(r),o=t(3),u=t(4),i=t.n(u),s="http://localhost:3001/api/entries",l={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},update:function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))}},h=t(0),j=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"success",children:n})},d=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{className:"error",children:n})},b=function(e){var n=e.addNewPerson,t=e.newName,c=e.newPhone,r=e.handleNameChange,a=e.handlePhoneChange;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"New entry:"}),Object(h.jsxs)("form",{onSubmit:n,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:"Name:"}),Object(h.jsx)("input",{value:t,onChange:r})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("p",{children:"Phone:"}),Object(h.jsx)("input",{value:c,onChange:a})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"Add"})})]})]})},f=function(e){var n=e.person,t=e.deleteEntry;return Object(h.jsxs)("li",{children:[Object(h.jsxs)("p",{children:[n.name," -- ",n.number]}),Object(h.jsx)("button",{onClick:function(){return t(n.id)},children:"Delete"})]},n.id)},m=function(e){var n=e.people,t=e.setPeople;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)("ul",{children:n.map((function(e){return Object(h.jsx)(f,{person:e,deleteEntry:function(){return function(e){var c=n.filter((function(n){return n.id===e}));window.confirm("Are you sure you want to delete ",c[0].name)&&l.deletePerson(e).then((function(c){t(n.filter((function(n){return n.id!==e})))}))}(e.id)}})}))})]})},O=function(e){var n=e.handleSearchChange,t=e.searchResults;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Search:"}),Object(h.jsx)("input",{onChange:n}),Object(h.jsx)("ul",{children:t.map((function(e){return Object(h.jsxs)("li",{children:[e.name," -- ",e.number]},e.id)}))})]})},p=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),u=Object(o.a)(a,2),i=u[0],s=u[1],f=Object(c.useState)(""),p=Object(o.a)(f,2),x=p[0],v=p[1],g=Object(c.useState)([]),w=Object(o.a)(g,2),P=w[0],C=w[1],N=Object(c.useState)(null),S=Object(o.a)(N,2),y=S[0],k=S[1],E=Object(c.useState)(null),A=Object(o.a)(E,2),T=A[0],D=A[1];Object(c.useEffect)((function(){l.getAll().then((function(e){var n=e.map((function(e){return{id:e.id,name:e.name,number:e.number}}));r(n)}))}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Phonebook"}),Object(h.jsx)(j,{message:y}),Object(h.jsx)(d,{message:T}),Object(h.jsx)(O,{handleSearchChange:function(e){var n=e.target.value;if(""!==n){var c=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));C(c)}},searchResults:P}),Object(h.jsx)("br",{}),Object(h.jsx)(b,{addNewPerson:function(e){e.preventDefault();var n={id:t.length+1,name:i,number:x},c=t.find((function(e){return n.name===e.name}));(console.log("Match: ",c),c)?window.confirm("Do you want to change ".concat(n.name,"'s number?'"))&&l.update(c.id,n).then((function(e){r(t.map((function(n){return n.id===e.id?e:n})))})).catch((function(e){D("".concat(c.name,"'s information has already been removed from the server!'")),setTimeout((function(){D(null)}),5e3)})):l.create(n).then((function(e){r(t.concat(e)),console.log("New People: ",t),s(""),v(""),k("Succesfully added ".concat(e.name,"!")),setTimeout((function(){k(null)}),5e3)})).catch((function(e){D("Validation Error: The name has to have more than 3 characters and the phone number more than 8!"),setTimeout((function(){D(null)}),5e3)}))},newName:i,newPhone:x,handleNameChange:function(e){s(e.target.value)},handlePhoneChange:function(e){v(e.target.value)}}),Object(h.jsx)("br",{}),Object(h.jsx)(m,{people:t,setPeople:r})]})};t(40);a.a.render(Object(h.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.06a9aaa9.chunk.js.map